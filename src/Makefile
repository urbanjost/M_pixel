#@(#) Makefile started by makeout(1) 2020-01-14 01:11:41
# generated by:   ...
NULL=

PROGFILES = \
   ../app/slices/pixel_slices.f90 \
   ../test/gif/circle_illusion/circle_illusion.f90 \
   ../test/no/circle_animated.f90 \
   ../example/demo_arc.f90 \
   ../example/demo_centertext.f90 \
   ../example/demo_circle.f90 \
   ../example/demo_circleprecision.f90 \
   ../example/demo_color.f90 \
   ../example/demo_draw2.f90 \
   ../example/demo_drawchar.f90 \
   ../example/demo_drawstr.f90 \
   ../example/demo_font.f90 \
   ../example/demo_getgp2.f90 \
   ../example/demo_hershey.f90 \
   ../example/demo_linewidth.f90 \
   ../example/demo_makepoly.f90 \
   ../example/demo_mapcolor.f90 \
   ../example/demo_move2.f90 \
   ../example/demo_M_pixel.f90 \
   ../example/demo_point2.f90 \
   ../example/demo_poly2.f90 \
   ../example/demo_polyline2.f90 \
   ../example/demo_prefsize.f90 \
   ../example/demo_print_ascii.f90 \
   ../example/demo_print_ppm.f90 \
   ../example/demo_rdraw2.f90 \
   ../example/demo_rect.f90 \
   ../example/demo_rmove2.f90 \
   ../example/demo_state.f90 \
   ../example/demo_strlength.f90 \
   ../example/demo_textang.f90 \
   ../example/demo_textsize.f90 \
   ../example/demo_vexit.f90 \
   ../example/demo_vinit.f90 \
   ../example/demo_readgif.f90 \
   ../example/demo_writegif.f90 \
$(NULL)

PROG = ${PROGFILES:.f90=}
SRCS  =  M_pixel.f90  M_readgif.f90  M_writegif_animated.f90  M_writegif.f90  M_pixel_slices.f90
OBJS  =  M_pixel.o    M_readgif.o    M_writegif_animated.o    M_writegif.o    M_pixel_slices.o
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
# platform-specific values you will probably change
# 
LIBS := 
CC := cc
CFLAGS := -O
FC := gfortran
FFLAGS := -O
LDFLAGS := 
# 
# You can either ignore it, or disable the "may be used uninitialized"
# warnings with -Wno-maybe-uninitialized or compile with optimizations
# (-O1 and more).
gfortran: F90=gfortran
gfortran: F90FLAGS := -g -O -Wall -std=f2018 -Wextra -Wno-maybe-uninitialized -Wno-uninitialized
gfortran: all
	@echo built with $(F90)

nvfortran: F90=nvfortran
nvfortran: F90FLAGS := -Minform=inform -Mbackslash -traceback
nvfortran: all
	@echo built with $(F90)

ifort: F90=ifort
ifort: F90FLAGS := -warn all -traceback
ifort: all
	@echo built with $(F90)

nagfor: F90=nagfor
nagfor: F90FLAGS := -C all
nagfor: all
	@echo built with $(F90)
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # 
all: $(PROG) 
	@echo "That's All Folks!"
$(PROG): $(OBJS)
	-$(F90) $(LDFLAGS) $@.f90 -o $@ $(OBJS) $(LIBS)
clean:
	rm -f $(PROG) $(CPROG) $(OBJS) *.mod manpages.txt
.SUFFIXES: $(SUFFIXES) .f90 .F90 
.f90.o:
	$(F90) $(F90FLAGS) -c $<
.F90.o:
	$(F90) $(F90FLAGS) -c $<
.PHONY: help
help:
	: all     '-- build M_CLI2 module'
	: run     '-- run manpage demo programs'
	: man     '-- show all manpages as text'
	: clean   '-- clean directory of object files and executables'
	: doxygen '-- run doxygen(1) if you have it'
	: help    '-- display this text'

.PHONY: run
run: $(PROG)
	# run everything
	echo $? |xargs -n 1|xargs -iXX time XX
	mv *.gif *.ppm ../docs/images/

.PHONY: doxygen
doxygen: 
	doxygen dox.in

.PHONY: man
man:
	@mandb ../man 1>&2
	: INDEX OF MANPAGES TOPICS
	@env MANPATH=../man MANWIDTH=256 man -k .|col -b
	: MANPAGES
	@env MANPATH=../man MANWIDTH=80  man --regex '.*'|col -b|tee manpages.txt
	: SPELLING
	@env MANPATH=../man MANWIDTH=80  man --regex '.*'|col -b|spell|xargs -n 5|column -t

